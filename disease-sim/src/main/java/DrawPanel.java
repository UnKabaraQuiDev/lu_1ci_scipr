
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import org.joml.Vector2f;

import lu.pcy113.pclib.PCUtils;

public class DrawPanel extends javax.swing.JPanel implements MouseListener {

	private Balls balls;

	public DrawPanel() {
		initComponents();
		super.addMouseListener(this);
	}

	@Override
	protected void paintComponent(Graphics g) {
		super.paintComponent(g);

		if (balls != null) {
			balls.draw((Graphics2D) g);
		}
	}

	public void setBalls(Balls balls) {
		this.balls = balls;
	}

	/**
	 * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify
	 * this code. The content of this method is always regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
	private void initComponents() {

		javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
		this.setLayout(layout);
		layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGap(0, 400, Short.MAX_VALUE));
		layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGap(0, 300, Short.MAX_VALUE));
	}// </editor-fold>//GEN-END:initComponents

	@Override
	public void mouseClicked(MouseEvent e) {
		final Ball b = balls.getSelectedBall(e.getX(), e.getY());
		if (b != null) {
			b.setState(DiseaseState.SICK);
		} else {
			for (int i = 0; i < 100; i++) {
				balls
						.add(new Ball(new Vector2f(PCUtils.randomIntRange(0, getWidth()), PCUtils.randomIntRange(0, getHeight())),
								new Vector2f((float) Math.random() * 2 - 1, (float) Math.random() * 2 - 1).normalize(),
								PCUtils.randomIntRange(5, 10)));
			}
		}
	}

	@Override
	public void mouseEntered(MouseEvent arg0) {

	}

	@Override
	public void mouseExited(MouseEvent arg0) {

	}

	@Override
	public void mousePressed(MouseEvent arg0) {

	}

	@Override
	public void mouseReleased(MouseEvent arg0) {

	}

	// Variables declaration - do not modify//GEN-BEGIN:variables
	// End of variables declaration//GEN-END:variables
}